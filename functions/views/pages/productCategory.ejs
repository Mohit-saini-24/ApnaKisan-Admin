<% layout('../boilerplate') %>
<% stylesheet('/css/style.css') -%>
<% include ../partials/header %>
<h5><%= category %></h5>
<a href="javascript:history.back()" class="btn cyan">Back</a>
<button class="btn green" onclick="openAddForm()" id="<%= category %>">Add To <%= category %></button>
<div class="row" id="displayProducts">
    <% categoryProducts.forEach(element => { %>
    <div class="col s12" style="padding: 10px;">
        <div>
            <div class="row">
                <div class="col s12">
                    <p class="center-align"><a href="/viewProduct/<%= element.id %>" class="btn blue">View</a></p>
                </div>
            </div>
            <div class="row">
                <div class="col s12">
                    <h5>Name : <%= element.data().productName %></h5>
                </div>
                <div class="col s12">
                    Hindi Name : <%= element.data().productNameHindi %>
                </div>
                <div class="col s12">
                    Company : <%= element.data().company %>
                </div>
                <% element.data().varients.forEach(varient => { %>

                <div class="col s6">
                    Var Name : <%= varient.varientName %>
                    <br>
                    Var Qty : <%= varient.varientQty %>
                    <br>
                    Disc. Price : <%= varient.discountPrice %>
                    <br>
                    Original Price : <%= varient.priceOriginal %></p>
                </div>
                <% }); %>
            </div>
        </div>
    </div>
    <br>
    <% }) %>
</div>
<div class="row container">
    <form enctype="multipart/form-data" action="/addNewProduct" id="addProductForm" method="post" style="display: none;">
        <div class="col s12">
            <div class="row">
                <div class="col s6">Name : </div>
                <div class="col s6 input-field">
                    <input type="text" name="name" required>
                </div>
            </div>
        </div>
        <div class="col s12">
            <div class="row">
                <div class="col s6">Company : </div>
                <div class="col s6 input-field">
                    <input type="text" name="company" required>
                </div>
            </div>
        </div>
        <div class="col s12">
            <div class="row">
                <div class="col s6">Hindi Name : </div>
                <div class="col s6 input-field">
                    <input type="text" name="nameHindi" required>
                </div>
            </div>
        </div>
        
        <div class="col s12">
            <div class="row">
                <div class="col s6">Description : </div>
                <div class="col s6 input-field">
                    <input type="text" name="description">
                </div>
            </div>
        </div>
        <div class="col s12">
            <div class="row">
                <div class="col s6">Varient Name : </div>
                <div class="col s6 input-field">
                    <input type="text" name="varientName" required>
                </div>
            </div>
        </div>
        <div class="col s12">
            <div class="row">
                <div class="col s6">Varient Quantity : </div>
                <div class="col s6 input-field">
                    <input type="text" name="varientQty" required>
                </div>
            </div>
        </div>
        <div class="col s12">
            <div class="row">
                <div class="col s6">Discount Price : </div>
                <div class="col s6 input-field">
                    <input type="text" name="discountPrice" required>
                </div>
            </div>
        </div>
        <div class="col s12">
            <div class="row">
                <div class="col s6">Original Price : </div>
                <div class="col s6 input-field">
                    <input type="text" name="priceOriginal" required>
                </div>
            </div>
        </div>
        <div class="col s12">
            <div class="row">
                <div class="col s6">Upload Image : </div>
                <div class="col s6">
                    <input type="file" name="productImage" id="productImage" required>
                </div>
            </div>
        </div>        
        <div class="col s12">
            <div class="row">
                <div class="col s6"><div class="btn red" onclick="closeForm()">Cancel</div></div>
                <div class="col s6 input-field">
                    <input type="hidden" name="category" value="<%= category %>">
                    <input type="submit" value="submit" class="btn green">
                </div>
            </div>
        </div>
        
    </form>
</div>
<script>
    function openAddForm() {
        document.getElementById('addProductForm').style.display = "";
        document.getElementById('displayProducts').style.display = "none";
    }
    function closeForm(){
        document.getElementById('addProductForm').style.display = "none";
        document.getElementById('displayProducts').style.display = "";
    }
</script>